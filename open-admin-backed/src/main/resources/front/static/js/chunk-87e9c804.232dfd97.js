(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87e9c804"],{"03e1":function(e,t,s){"use strict";s("9272")},1523:function(e,t,s){"use strict";s("f45c")},"80c1":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("common-layout",[r("div",{staticClass:"top"},[r("div",{staticClass:"header"},[r("img",{staticClass:"logo",attrs:{alt:"logo",src:s("4ffd")}}),r("span",{staticClass:"title"},[e._v(e._s(e.systemName))])]),r("div",{staticClass:"desc"},[e._v("Open Admin 致力于为用户生成定制的前后端脚手架框架")])]),r("div",{staticClass:"login"},[r("a-form",{attrs:{form:e.form},on:{submit:e.onSubmit}},[r("a-alert",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:e.error,showIcon:""}}),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"[\n            'username',\n            {\n              rules: [\n                { required: true, message: '请输入账户名', whitespace: true },\n              ],\n            },\n          ]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入账户名"}},[r("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"[\n            'password',\n            {\n              rules: [\n                { required: true, message: '请输入密码', whitespace: true },\n              ],\n            },\n          ]"}],attrs:{size:"large",placeholder:"请输入密码",autocomplete:"autocomplete",type:"password"}},[r("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"blur"}],expression:"[\n            'code',\n            {\n              rules: [{ required: true, message: '请输入验证码' }],\n              validateTrigger: 'blur',\n            },\n          ]"}],staticStyle:{width:"230px","margin-right":"20px",cursor:"pointer"},attrs:{size:"large",autocomplete:"false",placeholder:"请输入验证码"}}),r("img",{staticClass:"verCode",staticStyle:{display:"inline-block"},attrs:{src:e.verCode},on:{click:e.newVerCode}})],1),r("div",[r("a-checkbox",{attrs:{checked:!0}},[e._v("自动登录")])],1),r("a-form-item",[r("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:e.logging,size:"large",htmlType:"submit",type:"primary"}},[e._v("登录")])],1)],1)],1)])},a=[],o=s("5530"),i=(s("d81d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"common-layout"},[s("div",{staticClass:"content"},[e._t("default")],2),s("page-footer",{attrs:{"link-list":e.footerLinks,copyright:e.copyright}})],1)}),n=[],c=s("613e"),l=s("5880"),m={name:"CommonLayout",components:{PageFooter:c["a"]},computed:Object(o["a"])({},Object(l["mapState"])("setting",["footerLinks","copyright"]))},u=m,d=(s("1523"),s("2877")),p=Object(d["a"])(u,i,n,!1,null,"221a603c",null),f=p.exports,g=s("1d40"),h=s("b775"),v={name:"Login",components:{CommonLayout:f},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this),verCode:""}},computed:{systemName:function(){return this.$store.state.setting.systemName}},created:function(){this.newVerCode()},methods:Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("account",["setUser","setPermissions","setRole","setMenus"])),{},{newVerCode:function(){this.verCode="http://116.63.145.108:8030/backed/captcha?m="+Math.random()},onSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e){if(!e){t.logging=!0;var s=t.form.getFieldValue("username"),r=t.form.getFieldValue("password"),a=t.form.getFieldValue("code");Object(g["m"])({username:s,password:r,code:a}).then(t.afterLogin)}}))},translatePermission:function(e){return e.map((function(e){return{operation:JSON.parse(e.operation),component:e.component}}))},afterLogin:function(e){if(this.logging=!1,200==e.code){var t=e.data,s=t.user,r=t.permissions,a=t.menus;r=this.translatePermission(r),this.setUser(s),this.setPermissions(r),this.setMenus(a),this.setRole(s.role),Object(h["e"])({token:e.data.token,expireAt:new Date(e.data.tokenExpireAt)}),window.location.reload()}else this.error=e.message}})},w=v,b=(s("03e1"),Object(d["a"])(w,r,a,!1,null,"40866af9",null)),y=b.exports;t["default"]=y},9272:function(e,t,s){},f45c:function(e,t,s){}}]);