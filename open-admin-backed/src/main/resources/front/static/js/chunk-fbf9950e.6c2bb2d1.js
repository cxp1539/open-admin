(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbf9950e"],{"7c05":function(e,t,r){"use strict";r.r(t);var a,n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{style:{minHeight:"560px"},attrs:{bordered:!1}},[r("div",{staticClass:"table-operator"},[r("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("新建用户")])],1),r("s-table",{ref:"list",attrs:{rowKey:"id",size:"default",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t,a){return r("span",{},[[r("a",{on:{click:function(t){return e.handleEdit(a)}}},[r("a-icon",{attrs:{type:"edit"}}),e._v("编辑 ")],1)]],2)}},{key:"username",fn:function(t,a){return r("span",{},[r("img",{staticStyle:{width:"42px",height:"42px","border-radius":"50%"},attrs:{src:a.avatar}}),e._v(" "+e._s(a.username)+" ")])}},{key:"roleId",fn:function(t){return r("span",{},[r("a-tag",[e._v(e._s(e._f("roleFilter")(t)))])],1)}},{key:"status",fn:function(t){return r("span",{},[r("a-badge",{attrs:{color:e._f("statusTypeFilter")(t),text:e._f("statusFilter")(t)}})],1)}}])}),r("a-modal",{staticStyle:{top:"20px"},attrs:{title:1==e.formFlag?"创建用户":"修改用户",width:800},on:{cancel:e.cancel,ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-form",{ref:"ruleForm",attrs:{form:e.form,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-form-item",{attrs:{label:"用户名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名!"}]}],expression:"[\n            'username',\n            { rules: [{ required: true, message: '请输入用户名!' }] },\n          ]"}],attrs:{placeholder:"请输入用户名!"}})],1),r("a-form-item",{attrs:{label:"密码"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{validator:e.checkPassword}]}],expression:"[\n            'password',\n            { rules: [{ validator: checkPassword }] },\n          ]"}],attrs:{placeholder:"请输入密码,(编辑用户不填，则不更新密码)!"}})],1),r("a-form-item",{attrs:{label:"姓名"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入姓名!"}]}],expression:"[\n            'name',\n            { rules: [{ required: true, message: '请输入姓名!' }] },\n          ]"}],attrs:{placeholder:"请输入姓名!"}})],1),r("a-form-item",{attrs:{label:"用户角色"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleId",{rules:[{required:!0,message:"请选择用户角色!"}]}],expression:"[\n            'roleId',\n            { rules: [{ required: true, message: '请选择用户角色!' }] },\n          ]"}]},e._l(e.rolesMap,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),r("a-form-item",{attrs:{label:"用户状态"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择用户状态!"}]}],expression:"[\n            'status',\n            { rules: [{ required: true, message: '请选择用户状态!' }] },\n          ]"}]},e._l(e.statusMap,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)},s=[],o=(r("4d63"),r("ac1f"),r("25f0"),r("d81d"),r("b0c0"),r("7db0"),r("e8c4")),i=r("1d40"),l=r("81b8"),u=r("88bc"),c=r.n(u),d={name:"SysUserList",components:{STable:o["a"]},data:function(){var e=new RegExp("(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,30}"),t=function(t,r,a){r&&(e.test(r)||a(new Error("设置密码复杂度太低，必须包含大小写，数字，特殊字符，不少于8位"))),a()};return{layout:{labelCol:{span:4},wrapperCol:{span:14}},visible:!1,rolesMap:[],form:this.$form.createForm(this),formFlag:1,editId:0,checkPassword:t,statusMap:l["a"],labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},mdl:{},columns:[{title:"Id",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username",scopedSlots:{customRender:"username"}},{title:"姓名",dataIndex:"name",key:"name"},{title:"角色",dataIndex:"roleId",scopedSlots:{customRender:"roleId"},key:"roleId"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},key:"status"},{title:"创建时间",dataIndex:"createdTime",key:"createdTime"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"},key:"action"}],loadData:function(e){return Object(i["l"])(e).then((function(e){return e.data}))}}},created:function(){var e=this;a=this,Object(i["k"])().then((function(t){e.rolesMap=t.data.map((function(e){return{id:e.id,name:e.name}}))}))},filters:{roleFilter:function(e){var t=a.rolesMap.find((function(t){return t.id==e}));if(t)return t.name},statusFilter:function(e){var t=a.statusMap.find((function(t){return t.id==e}));if(t)return t.name},statusTypeFilter:function(e){var t=a.statusMap.find((function(t){return t.id==e}));if(t)return t.color}},methods:{handleEdit:function(e){var t=this;this.visible=!0,this.formFlag=2,this.editId=e.id,this.$nextTick((function(){t.$refs["ruleForm"].form.setFieldsValue(c()(e,"name","roleId","status","username"))}))},handleCreate:function(){this.visible=!0,this.$refs["ruleForm"].form.resetFields(),this.formFlag=1},cancel:function(){this.$refs["ruleForm"].form.resetFields()},handleOk:function(e){var t=this;e.preventDefault(),this.$refs["ruleForm"].form.validateFields((function(e,r){e||(1==t.formFlag?Object(i["b"])(r).then((function(e){200==e.code?(t.$message.success("创建用户成功"),t.visible=!1,t.$refs.list.refresh()):t.$message.error(e.message)})):(r.id=t.editId,Object(i["s"])(r).then((function(e){200==e.code?(t.$message.success("修改用户信息成功"),t.visible=!1,t.$refs.list.refresh()):t.$message.error(e.message)}))))}))}}},f=d,m=r("2877"),p=Object(m["a"])(f,n,s,!1,null,null,null);t["default"]=p.exports},"81b8":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=[{id:1,name:"正常",color:"blue"},{id:2,name:"禁用",color:"#f50"}]},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,n="[object Arguments]",s="[object Function]",o="[object GeneratorFunction]",i="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=l||u||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function f(e,t){var r=-1,a=e?e.length:0,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}function m(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var p=Object.prototype,h=p.hasOwnProperty,v=p.toString,b=c.Symbol,y=p.propertyIsEnumerable,g=b?b.isConcatSpreadable:void 0,w=Math.max;function k(e,t,r,a,n){var s=-1,o=e.length;r||(r=I),n||(n=[]);while(++s<o){var i=e[s];t>0&&r(i)?t>1?k(i,t-1,r,a,n):m(n,i):a||(n[n.length]=i)}return n}function x(e,t){return e=Object(e),F(e,t,(function(t,r){return r in e}))}function F(e,t,r){var a=-1,n=t.length,s={};while(++a<n){var o=t[a],i=e[o];r(i,o)&&(s[o]=i)}return s}function j(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,n=w(r.length-t,0),s=Array(n);while(++a<n)s[a]=r[t+a];a=-1;var o=Array(t+1);while(++a<t)o[a]=r[a];return o[t]=s,d(e,this,o)}}function I(e){return S(e)||O(e)||!!(g&&e&&e[g])}function _(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function O(e){return C(e)&&h.call(e,"callee")&&(!y.call(e,"callee")||v.call(e)==n)}var S=Array.isArray;function $(e){return null!=e&&q(e.length)&&!M(e)}function C(e){return E(e)&&$(e)}function M(e){var t=A(e)?v.call(e):"";return t==s||t==o}function q(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function E(e){return!!e&&"object"==typeof e}function T(e){return"symbol"==typeof e||E(e)&&v.call(e)==i}var N=j((function(e,t){return null==e?{}:x(e,f(k(t,1),_))}));e.exports=N}).call(this,r("c8ba"))}}]);