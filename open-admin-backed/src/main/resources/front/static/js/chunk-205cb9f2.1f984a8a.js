(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-205cb9f2"],{"7c05":function(e,t,a){"use strict";a.r(t);var r,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{style:{minHeight:"592px"},attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("新建用户")])],1),a("s-table",{ref:"list",attrs:{rowKey:"id",size:"default",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"action",fn:function(t,r){return a("span",{},[[a("a",{on:{click:function(t){return e.handleEdit(r)}}},[e._v("修改")])]],2)}},{key:"username",fn:function(t,r){return a("span",{},[a("img",{staticStyle:{width:"42px",height:"42px","border-radius":"50%"},attrs:{src:r.avatar}}),e._v(" "+e._s(r.username)+" ")])}},{key:"role",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:"admin"===t?"volcano":"geekblue"}},[e._v(e._s(e._f("roleFilter")(t)))])],1)}},{key:"status",fn:function(t){return a("span",{},[a("a-badge",{attrs:{color:e._f("statusTypeFilter")(t),text:e._f("statusFilter")(t)}})],1)}}])}),a("a-modal",{staticStyle:{top:"20px"},attrs:{title:1==e.formFlag?"创建用户":"修改用户",width:800},on:{cancel:e.cancel,ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{ref:"ruleForm",attrs:{form:e.form,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名!"}]}],expression:"['username', { rules: [{ required: true, message: '请输入用户名!' }] }]"}],attrs:{placeholder:"请输入用户名!"}})],1),a("a-form-item",{attrs:{label:"密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",,{rules:[{validator:e.checkPassword}]}],expression:"['password', , { rules: [{ validator: checkPassword }] }]"}],attrs:{placeholder:"请输入密码,(编辑用户不填，则不更新密码)!"}})],1),a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入姓名!"}]}],expression:"['name', { rules: [{ required: true, message: '请输入姓名!' }] }]"}],attrs:{placeholder:"请输入姓名!"}})],1),a("a-form-item",{attrs:{label:"用户角色"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role",{rules:[{required:!0,message:"请选择用户角色!"}]}],expression:"['role', { rules: [{ required: true, message: '请选择用户角色!' }] }]"}]},e._l(e.rolesMap,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"用户状态"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{rules:[{required:!0,message:"请选择用户状态!"}]}],expression:"['status', { rules: [{ required: true, message: '请选择用户状态!' }] }]"}]},e._l(e.statusMap,(function(t,r){return a("a-select-option",{key:r,attrs:{value:r}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1)},n=[],o=(a("f566"),a("9b5f"),a("d447"),a("3337"),a("1d43"),a("4cd5"),a("e8c4")),l=a("1d40"),i=a("81b8"),u={name:"SysUserList",components:{STable:o["a"]},data:function(){var e=new RegExp("(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,30}"),t=function(t,a,r){a&&(e.test(a)||r(new Error("设置密码复杂度太低，必须包含大小写，数字，特殊字符，不少于8位"))),r()};return{layout:{labelCol:{span:4},wrapperCol:{span:14}},visible:!1,rolesMap:[],form:this.$form.createForm(this),formFlag:1,checkPassword:t,statusMap:i["a"],labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},mdl:{},columns:[{title:"Id",dataIndex:"id",key:"id"},{title:"用户名",dataIndex:"username",key:"username",scopedSlots:{customRender:"username"}},{title:"姓名",dataIndex:"name",key:"name"},{title:"角色",dataIndex:"role",scopedSlots:{customRender:"role"},key:"role"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},key:"status"},{title:"创建时间",dataIndex:"createdTime",key:"createdTime"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"},key:"action"}],loadData:function(e){return Object(l["i"])(e).then((function(e){return e.data}))}}},created:function(){var e=this;r=this,Object(l["h"])().then((function(t){e.rolesMap=t.data.map((function(e){return{id:e.id,name:e.name}}))}))},filters:{roleFilter:function(e){var t=r.rolesMap.find((function(t){return t.id==e}));if(t)return t.name},statusFilter:function(e){return i["a"][e].name},statusTypeFilter:function(e){return i["a"][e].color}},methods:{handleEdit:function(e){var t=this;this.visible=!0,this.formFlag=2,this.$nextTick((function(){t.$refs["ruleForm"].form.setFieldsValue(e)}))},handleCreate:function(){this.visible=!0,this.$refs["ruleForm"].form.resetFields(),this.formFlag=1},cancel:function(){this.$refs["ruleForm"].form.resetFields()},handleOk:function(e){var t=this;e.preventDefault(),this.$refs["ruleForm"].form.validateFields((function(e,a){e||(1==t.formFlag?Object(l["a"])(a).then((function(e){200==e.code?t.$message.success("创建用户成功"):t.$message.error(e.message),t.visible=!1,t.$refs.list.refresh()})):Object(l["n"])(a).then((function(e){t.$message.success("修改用户信息成功"),t.visible=!1,t.$refs.list.refresh()})))}))}}},c=u,d=a("2877"),m=Object(d["a"])(c,s,n,!1,null,null,null);t["default"]=m.exports},"81b8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={1:{name:"正常",color:"blue"},2:{name:"禁用",color:"f50"}}}}]);