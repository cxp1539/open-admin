(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e8c7ad4"],{"07e0":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{style:{minHeight:"560px"},attrs:{bordered:!1}},[r("div",{staticClass:"table-operator"},[r("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleCreate}},[e._v("新建根菜单")])],1),r("s-table",{ref:"list",attrs:{rowKey:"id",size:"default",columns:e.columns,data:e.loadData,pagination:!1,childrenColumnName:"children"},scopedSlots:e._u([{key:"name",fn:function(t,a){return r("span",{},[a.icon?r("a-icon",{staticStyle:{"margin-left":"6px"},attrs:{type:a.icon}}):e._e(),e._v(" "+e._s(a.name)+" ")],1)}},{key:"path",fn:function(t,a){return r("span",{},[r("a-tag",[e._v(e._s(a.path))])],1)}},{key:"component",fn:function(t,a){return r("span",{},[r("a-tag",[e._v(e._s(a.component))])],1)}},{key:"invisible",fn:function(t,a){return r("span",{},[r("a-badge",{attrs:{color:e._f("invisibleColor")(a.invisible),text:e._f("invisibleText")(a.invisible)}})],1)}},{key:"cacheAble",fn:function(t,a){return r("span",{},[r("a-badge",{attrs:{color:e._f("cacheAbleColor")(a.cacheAble),text:e._f("cacheAbleText")(a.cacheAble)}})],1)}},{key:"action",fn:function(t,a){return r("span",{},[r("a",{on:{click:function(t){return e.handleAddSub(a)}}},[r("a-icon",{attrs:{type:"plus"}}),e._v("新增子菜单 ")],1),r("a-divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(t){return e.handleEdit(a)}}},[r("a-icon",{attrs:{type:"edit"}}),e._v("编辑 ")],1),r("a-divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(t){return e.handleDelete(a)}}},[r("a-icon",{attrs:{type:"delete"}}),e._v("删除 ")],1)],1)}}])}),r("a-modal",{staticClass:"edit-modal",attrs:{title:1==e.formFlag?"创建系统根菜单":2==e.formFlag?"编辑系统菜单":"创建系统菜单",width:800},on:{cancel:e.cancel,ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-form",{attrs:{labelWidth:"260",form:e.form,labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{required:!0,label:"路由"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:"请输入路由!"}]}],expression:"[\n                'path',\n                { rules: [{ required: true, message: '请输入路由!' }] },\n              ]"}],attrs:{placeholder:"请输入路由!"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"菜单名称"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入菜单名称!"}]}],expression:"[\n                'name',\n                { rules: [{ required: true, message: '请输入菜单名称!' }] },\n              ]"}],attrs:{placeholder:"请输入菜单名称!"}})],1)],1)],1),r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"是否隐藏菜单"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["invisible",{rules:[{required:!0,message:"请选择是否隐藏菜单!"}]}],expression:"[\n                'invisible',\n                {\n                  rules: [{ required: true, message: '请选择是否隐藏菜单!' }],\n                },\n              ]"}],attrs:{placeholder:"请选择是否隐藏菜单!"}},e._l(e.invisibleMap,(function(t){return r("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.text))])})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"是否缓存页面"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cacheAble",{rules:[{required:!0,message:"请选择是否缓存页面!"}]}],expression:"[\n                'cacheAble',\n                {\n                  rules: [{ required: true, message: '请选择是否缓存页面!' }],\n                },\n              ]"}],attrs:{placeholder:"请选择是否缓存页面!"}},e._l(e.cacheAbleMap,(function(t){return r("a-select-option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.text))])})),1)],1)],1)],1),r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"组件名称"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:!0,message:"请选择组件名称!"}]}],expression:"[\n                'component',\n                { rules: [{ required: true, message: '请选择组件名称!' }] },\n              ]"}],attrs:{placeholder:"请选择组件名称!"}},e._l(e.constantRouterComponents,(function(t,a){return r("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"排序"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{rules:[{required:!0,message:"请输入排序!"}]}],expression:"[\n                'sort',\n                { rules: [{ required: true, message: '请输入排序!' }] },\n              ]"}],attrs:{placeholder:"请输入排序!"}})],1)],1)],1),r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"父节点"}},[1==e.formFlag?r("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId"],expression:"['parentId']"}],staticStyle:{width:"100%"},attrs:{disabled:"disabled",placeholder:"根节点",defaultValue:"0"}}):r("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{rules:[{required:!0,message:"请选择父节点!"}]}],expression:"[\n                'parentId',\n                { rules: [{ required: true, message: '请选择父节点!' }] },\n              ]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请选择父节点!","dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.menuList,"tree-default-expand-all":"",replaceFields:{title:"name",key:"id",value:"id",children:"children"}}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:"图标"}},[3==e.formFlag?r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{initialValue:""}],expression:"['icon', { initialValue: '' }]"}],attrs:{placeholder:"",disabled:"disabled"}},e._l(e.iconList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t}},[r("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:t}}),e._v(" "+e._s(t)+" ")],1)})),1):r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{required:!0,message:"请选择图标!"}]}],expression:"[\n                'icon',\n                { rules: [{ required: true, message: '请选择图标!' }] },\n              ]"}],attrs:{placeholder:"请选择图标!"}},e._l(e.iconList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t}},[r("a-icon",{staticStyle:{"margin-right":"6px"},attrs:{type:t}}),e._v(" "+e._s(t)+" ")],1)})),1)],1)],1)],1),r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:24}},[r("a-button",{staticClass:"editable-add-btn",attrs:{size:"small"},on:{click:e.handlePermissionAdd}},[e._v("增加页面菜单权限")]),r("a-table",{attrs:{locale:{emptyText:"暂无数据"},rowKey:"index",columns:e.permissionColumn,"data-source":e.permissionData,bordered:"",pagination:!1},scopedSlots:e._u([e._l(["action","describe"],(function(t){return{key:t,fn:function(a,n){return[r("div",{key:t},[n.editable?r("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(r){return e.handlePermissionChange(r.target.value,n.action,t)}}}):[e._v(e._s(a))]],2)]}}})),{key:"operation",fn:function(t,a){return[r("div",{staticClass:"editable-row-operations"},[r("a",{staticStyle:{"margin-left":"6px"},on:{click:function(){return e.removePermission(a.action)}}},[e._v("删除")])])]}}],null,!0)})],1)],1)],1)],1)],1)},n=[],i=r("2909"),o=(r("7db0"),r("d81d"),r("4de4"),r("e8c4")),s=r("1d40"),l=["account-book","alert","api","appstore","audio","bank","bell","book","bug","bulb","calculator","build","calendar","camera","car","carry-out","cloud","code","compass","contacts","container","control","credit-card","crown","customer-service","dashboard","database","dislike","environment","experiment","eye-invisible","eye","file-add","file","filter","fire","flag","folder-add","folder","folder-open","funnel-plot","gift","hdd","heart","home","hourglass","idcard","interaction","layout","like","lock","mail","medicine-box","message","mobile","money-collect","pay-circle","notification","phone","picture","play-square","printer","profile","project","pushpin","property-safety","read","reconciliation","red-envelope","rest","rocket","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","sound","star","switcher","tablet","tag","tags","tool","thunderbolt","trophy","unlock","usb","video-camera","wallet","apartment","audit","barcode","bars","block","branches","ci","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","coffee","copyright","deployment-unit","desktop","disconnect","dollar","download","euro","exception","export","file-done","file-jpg","file-protect","file-sync","file-search","fork","gateway","global","gold","history","import","inbox","key","laptop","link","line","man","menu","monitor","number","percentage","paper-clip","pound","poweroff","pull-request","qrcode","reload","safety","robot","scan","search","select","shake","share-alt","shopping-cart","solution","sync","table","team","to-top","trademark","transaction","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","wifi","line-chart","form","question-circle","check-circle","appstore-o"],c=[{key:0,text:"不隐藏",color:"blue"},{key:1,text:"隐藏",color:"#f50"}],u=[{key:0,text:"不缓存",color:"blue"},{key:1,text:"缓存",color:"#f50"}],d=r("0fbc"),p=r("88bc"),m=r.n(p),f=[{title:"权限Action",dataIndex:"action",scopedSlots:{customRender:"action"}},{title:"权限Describe",dataIndex:"describe",scopedSlots:{customRender:"describe"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],h={name:"MenuList",components:{STable:o["a"]},data:function(){var e=this;return{permissionData:[],permissionColumn:f,editingKey:"",visible:!1,formFlag:1,editId:0,labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),invisibleMap:c,cacheAbleMap:u,constantRouterComponents:d["b"],iconList:l,menuList:[],allMenuMap:[],columns:[{title:"Id",dataIndex:"id"},{title:"菜单名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"路径",dataIndex:"path",scopedSlots:{customRender:"path"}},{title:"组件名称",dataIndex:"component",scopedSlots:{customRender:"component"}},{title:"菜单是否隐藏",dataIndex:"invisible",scopedSlots:{customRender:"invisible"}},{title:"页面是否缓存",dataIndex:"cacheAble",scopedSlots:{customRender:"cacheAble"}},{title:"排序",dataIndex:"sort"},{title:"操作",width:"260px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(s["j"])(t).then((function(t){return e.menuList=e.processMenuList(t.data),e.menuList}))}}},filters:{invisibleColor:function(e){return c.find((function(t){return t.key==e}))["color"]},cacheAbleColor:function(e){return u.find((function(t){return t.key==e}))["color"]},invisibleText:function(e){return c.find((function(t){return t.key==e}))["text"]},cacheAbleText:function(e){return u.find((function(t){return t.key==e}))["text"]}},methods:{processMenuList:function(e){var t=this;return e.map((function(e){return e.children.length>0?e.children=t.processMenuList(e.children):delete e.children,e}))},handlePermissionAdd:function(){this.permissionData.push({index:(new Date).getTime(),action:"",describe:"",editable:!0})},handlePermissionChange:function(e,t,r){var a=Object(i["a"])(this.permissionData),n=a.filter((function(e){return t===e.action}))[0];n&&(n[r]=e,this.permissionData=a)},removePermission:function(e){this.permissionData=this.permissionData.filter((function(t){return e!=t.action}))},handleEdit:function(e){var t=this;this.visible=!0,this.editId=e.id,this.formFlag=2,e.permissions?this.permissionData=JSON.parse(e.permissions).map((function(e){return{index:e.action,action:e.action,describe:e.describe,editable:!0}})):this.permissionData=[],this.$nextTick((function(){t.form.setFieldsValue(m()(e,"path","invisible","name","icon","cacheAble","sort","component","parentId"))}))},handleAddSub:function(e){var t=this;this.visible=!0,this.formFlag=3,this.permissionData=[],this.$nextTick((function(){t.form.setFieldsValue({parentId:e.id})}))},handleCreate:function(){this.visible=!0,this.form.resetFields(),this.permissionData=[],this.formFlag=1},handleDelete:function(e){var t=this,r=this.$confirm({title:"提示",content:"确定要删除该菜单吗?",onOk:function(){return Object(s["c"])({menuId:e.id}).then((function(e){200==e.code?(t.$message.success("删除菜单成功"),t.$refs.list.refresh()):t.$message.error(e.message),r.destroy()}))},onCancel:function(){}})},cancel:function(){this.form.resetFields()},handleOk:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){if(!e){var a=t.permissionData.map((function(e){return{action:e.action,describe:e.describe}}));r.permissions=JSON.stringify(a),1==t.formFlag||3==t.formFlag?Object(s["a"])(r).then((function(e){200==e.code?(t.$message.success("创建菜单成功"),t.visible=!1,t.$refs.list.refresh()):t.$message.error(e.message)})):(r.id=t.editId,Object(s["e"])(r).then((function(e){200==e.code?(t.$message.success("编辑菜单成功"),t.visible=!1,t.$refs.list.refresh()):t.$message.error(e.message)})))}}))}}},b=h,v=(r("5695"),r("2877")),g=Object(v["a"])(b,a,n,!1,null,"30ed7fb6",null);t["default"]=g.exports},5695:function(e,t,r){"use strict";r("cf9b")},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,n="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function p(e,t){var r=-1,a=e?e.length:0,n=Array(a);while(++r<a)n[r]=t(e[r],r,e);return n}function m(e,t){var r=-1,a=t.length,n=e.length;while(++r<a)e[n+r]=t[r];return e}var f=Object.prototype,h=f.hasOwnProperty,b=f.toString,v=u.Symbol,g=f.propertyIsEnumerable,y=v?v.isConcatSpreadable:void 0,x=Math.max;function k(e,t,r,a,n){var i=-1,o=e.length;r||(r=A),n||(n=[]);while(++i<o){var s=e[i];t>0&&r(s)?t>1?k(s,t-1,r,a,n):m(n,s):a||(n[n.length]=s)}return n}function w(e,t){return e=Object(e),_(e,t,(function(t,r){return r in e}))}function _(e,t,r){var a=-1,n=t.length,i={};while(++a<n){var o=t[a],s=e[o];r(s,o)&&(i[o]=s)}return i}function S(e,t){return t=x(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,n=x(r.length-t,0),i=Array(n);while(++a<n)i[a]=r[t+a];a=-1;var o=Array(t+1);while(++a<t)o[a]=r[a];return o[t]=i,d(e,this,o)}}function A(e){return I(e)||j(e)||!!(y&&e&&e[y])}function C(e){if("string"==typeof e||L(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function j(e){return F(e)&&h.call(e,"callee")&&(!g.call(e,"callee")||b.call(e)==n)}var I=Array.isArray;function q(e){return null!=e&&O(e.length)&&!D(e)}function F(e){return N(e)&&q(e)}function D(e){var t=$(e)?b.call(e):"";return t==i||t==o}function O(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function $(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function N(e){return!!e&&"object"==typeof e}function L(e){return"symbol"==typeof e||N(e)&&b.call(e)==s}var M=S((function(e,t){return null==e?{}:w(e,p(k(t,1),C))}));e.exports=M}).call(this,r("c8ba"))},cf9b:function(e,t,r){}}]);